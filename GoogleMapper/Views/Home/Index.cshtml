@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Mapper!</title>
    <!--Google Maps -->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <style>
        html {
            height: 100%;
        }
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #googleMap {
            height: 100%;
        }
    </style>
    <script>
        var googleMap, googlePolyLine;
        var googlePoints = new google.maps.MVCArray();
        function initialize() {

            var mapOptions = {
                center: new google.maps.LatLng(33.4500, -112.0067), //phoenix
                zoom: 11,
                //mapTypeId: google.maps.MapTypeId.TERRAIN
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            googleMap = new google.maps.Map(document.getElementById('googleMap'), mapOptions);

        }

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>

</head>
<body>
    <div id="googleMap"></div>
    @Scripts.Render("~/bundles/jquery")
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.1.1.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>

    <script>
        // Reference the auto-generated proxy for the hub.
        var maps = $.connection.mapsHub;
        maps.client.addLocations = function (data) {
            addPoints(data);
        };

        $.connection.hub.start().done(function () {
            maps.server.getLocations().done(function (data) {
                addPoints(data);
            })
        })

        function addPoints(data) {
            if (data.length > 0) {
                addGoogleMapBlips(data);
            }
        }

        var lastZoom = 10;
        var circle;
        var rMin = 500, rMax = 1000, step = 10;
        var intID;

        //To add Google Map Points
        function addGoogleMapBlips(loc) {
            var path;
            for (i = 0; i < loc.length; i++) {
                var m = new google.maps.Circle({
                    
                    center: new google.maps.LatLng(loc[i].Lat, loc[i].Lng),
                    radius: rMin,
                    fillColor: 'red',
                    fillOpacity: .2,
                    strokeColor: 'white',
                    strokeWeight: .5
                });

                m.setMap(googleMap);
                setAnimation(m);
            }
        }

        function setAnimation(circ) {
            var direction = 1;
            intID = setInterval(function () {
                var radius = circ.getRadius();
                if ((radius > rMax) || (radius < rMin)) {
                    //direction = 0;        //Stop the Circle!
                    direction *= -1;
                    //circ.setMap(null);    //Death to the Circle!
                }
                circ.setRadius(radius + direction * step);
            }, 10);
        }
    </script>

    //https://developers.google.com/maps/documentation/javascript/reference
</body>
</html>
